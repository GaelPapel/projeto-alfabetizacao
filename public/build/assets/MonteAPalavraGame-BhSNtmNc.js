import{r as n,j as a}from"./app-Cv2p_eYH.js";import{u as T,A,g as I,h as P}from"./AppLayout-D0iBk3W4.js";const q="_gameContainer_149gy_5",U="_header_149gy_33",M="_title_149gy_61",Q="_scoreDisplay_149gy_77",w="_gameCard_149gy_89",V="_gameInstruction_149gy_133",J="_questionSection_149gy_147",X="_questionImage_149gy_161",z="_targetWordDisplay_149gy_191",H="_targetWordLetter_149gy_217",K="_filled_149gy_237",Y="_syllableBank_149gy_247",Z="_syllableChip_149gy_265",ee="_used_149gy_319",ae="_buttonsContainer_149gy_337",se="_actionButton_149gy_353",te="_primary_149gy_381",re="_secondary_149gy_401",ne="_success_149gy_421",le="_feedbackBubble_149gy_475",oe="_correct_149gy_509",ce="_incorrect_149gy_521",ie="_endGameScreen_149gy_559",de="_loadingScreen_149gy_559",e={gameContainer:q,header:U,title:M,scoreDisplay:Q,gameCard:w,gameInstruction:V,questionSection:J,questionImage:X,targetWordDisplay:z,targetWordLetter:H,filled:K,syllableBank:Y,syllableChip:Z,used:ee,buttonsContainer:ae,actionButton:se,primary:te,secondary:re,success:ne,feedbackBubble:le,correct:oe,incorrect:ce,endGameScreen:ie,loadingScreen:de},ge=[{id:1,palavra:"CASA",imagem:"/assets/images/casa.jpg",silabas:["C","A","S","A"]},{id:2,palavra:"BOLA",imagem:"/assets/images/bola.jpg",silabas:["L","A","B","O"]},{id:3,palavra:"SAPO",imagem:"/assets/images/sapo.jpg",silabas:["P","O","S","A"]},{id:4,palavra:"ARVORE",imagem:"/assets/images/arvore.jpg",silabas:["V","O","R","E","A","R"]},{id:5,palavra:"SOL",imagem:"/assets/images/sol.jpg",silabas:["L","O","S"]},{id:6,palavra:"FLOR",imagem:"/assets/images/flor.jpg",silabas:["R","O","L","F"]},{id:7,palavra:"LUA",imagem:"/assets/images/lua.jpg",silabas:["A","L","U"]},{id:8,palavra:"FOGUETE",imagem:"/assets/images/foguete.jpg",silabas:["T","E","F","O","G","U","E"]},{id:9,palavra:"PEIXE",imagem:"/assets/images/peixe.jpg",silabas:["E","I","X","P","E"]},{id:10,palavra:"BARCO",imagem:"/assets/images/barco.jpg",silabas:["C","O","B","A","R"]}],me=i=>{let o=[...i];for(let c=o.length-1;c>0;c--){const m=Math.floor(Math.random()*(c+1));[o[c],o[m]]=[o[m],o[c]]}return o};function ye(){const[i,o]=n.useState([]),[c,m]=n.useState(0),[l,N]=n.useState(null),[L,u]=n.useState([]),[d,p]=n.useState([]),[k,g]=n.useState(""),[y,_]=n.useState(null),[B,R]=n.useState(0),[j,$]=n.useState(!0),[O,E]=n.useState(!1),{speak:x,stop:v}=T(),C=n.useCallback(async()=>{$(!0),g(""),_(null),p([]),u([]);try{o(ge)}catch(s){console.error("Erro ao buscar dados do jogo:",s),g("Erro ao carregar o jogo. Tente novamente mais tarde."),o([])}finally{$(!1)}},[]);n.useEffect(()=>{C()},[C]),n.useEffect(()=>{if(i.length>0)if(c<i.length){const s=i[c];N(s),u(me(s.silabas.map(r=>({value:r,used:!1})))),p(Array(s.palavra.length).fill("")),g(""),_(null),v()}else E(!0),v();else!j&&i.length===0&&(g("Nenhuma palavra disponível para o jogo."),N(null))},[c,i,j,v]);const D=(s,r)=>{const t=d.indexOf("");if(t!==-1){const h=[...d];h[t]={syllable:s,originalIndex:r},p(h),u(b=>b.map((f,S)=>S===r?{...f,used:!0}:f))}},F=s=>{const r=d[s];if(r){const t=[...d];t[s]="",u(b=>b.map((f,S)=>S===r.originalIndex?{...f,used:!1}:f));const h=t.filter(b=>b!=="");p([...h,...Array(t.length-h.length).fill("")])}},G=()=>{if(v(),!l)return;const s=l.palavra.toUpperCase();d.map(t=>t?t.syllable:"").join("")===s?(g("✅ Parabéns! Você montou a palavra!"),_("correct"),R(t=>t+1),x("Parabéns! "+l.palavra,"pt-BR"),setTimeout(()=>{m(t=>t+1)},2e3)):(g("❌ Que pena! Tente novamente."),_("incorrect"),x("Que pena! Tente novamente.","pt-BR"))},W=()=>{m(0),R(0),E(!1),C()};return j?a.jsxs(A,{children:[" ",a.jsx("div",{className:e.gameContainer,children:a.jsx("div",{className:`${e.gameCard} ${e.loadingScreen}`,children:a.jsx("p",{className:e.gameInstruction,children:"Carregando jogo, por favor aguarde..."})})})]}):O?a.jsxs(A,{children:[" ",a.jsx("div",{className:e.gameContainer,children:a.jsxs("div",{className:`${e.gameCard} ${e.endGameScreen}`,children:[a.jsx("h2",{children:"🎉 Fim do Jogo! 🎉"}),a.jsxs("p",{children:["Sua pontuação final: ",a.jsx("strong",{className:e.scoreDisplay,children:B})," de ",a.jsx("strong",{className:e.scoreDisplay,children:i.length})]}),a.jsxs("button",{onClick:W,className:`${e.actionButton} ${e.primary}`,children:[a.jsx(I,{})," Jogar Novamente"]})]})})]}):a.jsxs(A,{children:[" ",a.jsxs("div",{className:e.gameContainer,children:[a.jsxs("header",{className:e.header,children:[a.jsx("h1",{className:e.title,children:"Monte a Palavra"}),a.jsxs("div",{className:e.scoreDisplay,children:["Pontos: ",B]})]}),a.jsxs("div",{className:`${e.gameCard} ${y==="incorrect"?e.gameCardShake:""}`,children:[a.jsx("p",{className:e.gameInstruction,children:"Observe a imagem e monte a palavra!"}),a.jsxs("div",{className:e.questionSection,children:[l&&l.imagem&&a.jsx("img",{src:l.imagem,alt:"Ilustração da palavra",className:e.questionImage,onClick:()=>x(l.palavra,"pt-BR"),style:{cursor:"pointer"}}),a.jsx(ReadTextButton,{text:l?l.palavra:"",lang:"pt-BR"})]}),a.jsx("div",{className:e.targetWordDisplay,children:Array.from({length:l?l.palavra.length:0}).map((s,r)=>{const t=d[r];return a.jsx("span",{className:`${e.targetWordLetter} ${t?e.filled:""}`,onClick:()=>F(r),style:{cursor:t?"pointer":"default"},children:t?t.syllable:""},r)})}),a.jsx("div",{className:e.syllableBank,children:L.map((s,r)=>a.jsx("button",{onClick:()=>D(s.value,r),className:`${e.syllableChip} ${s.used?e.used:""}`,disabled:s.used||y==="correct",children:s.value},r))}),a.jsxs("div",{className:e.buttonsContainer,children:[a.jsxs("button",{onClick:G,className:`${e.actionButton} ${e.success}`,disabled:d.some(s=>!s)||y==="correct",children:[a.jsx(P,{})," Verificar"]}),a.jsxs("button",{onClick:()=>{p(Array(l.palavra.length).fill("")),u(s=>s.map(r=>({value:r.value,used:!1}))),g(""),_(null)},className:`${e.actionButton} ${e.secondary}`,children:[a.jsx(I,{})," Limpar"]})]}),k&&a.jsxs("div",{className:`${e.feedbackBubble} ${y==="correct"?e.correct:e.incorrect}`,children:[y==="correct"?"🎉":"🤔"," ",k]})]})]})]})}export{ye as default};
